{% extends 'base.html' %}
{% load static %}
{% load filters %}
{% block content %}

{#                <div class="display-container">#}
{#                <div class="heading row" style="display: flex; justify-content: space-around;">#}
{#                    <div class="alert alert-primary" role="alert">#}
{#                        Loyiha Budjeti: <span id="totalBudget">{{ project.project_budget | format_number }}</span>#}
{#                    </div>#}
{#                    <div class="alert alert-primary" role="alert">#}
{#                        Jami xarajatlar: <span#}
{#                            id="totalExpenses">{{ project.project_spent_money | format_number }}</span>#}
{#                    </div>#}
{#                    <div class="alert alert-primary" role="alert">#}
{#                        Qolgan budjet: <span#}
{#                            id="budgetLeft">{% multiple_args_tag project.project_budget project.project_spent_money %}</span>#}
{#                    </div>#}
{#                </div>#}
<div class="bg-white">
    <div class="w-100 h-100 mt-3 row">
                <div class="col-lg-12 col-sm-12 col-md-12 col-lg-8 border">
                <div class="row mt-3 p-3">
                    <div class="col-lg-3 col-md-12 col-sm-12">
                        <div class="card bg-light text-center" style="box-shadow: rgba(0, 0, 0, 0.08) 0px 4px 12px;">
                            <div class="card-header"><h5 class="text-secondary">Loyiha budgeti</h5>
                                <span id="totalBudget">{{ project.project_budget | format_number }}</span></div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-12 col-sm-12">
                        <div class="card bg-light " style="box-shadow: rgba(0, 0, 0, 0.08) 0px 4px 12px;">
                            <div class="card-header text-center"><h5 class="text-secondary">Jami xarajatlar</h5>
                                <span
                            id="totalExpenses">{{ project.project_spent_money | format_number }}</span></div>
                        </div>
                    </div>
                                  <div class="col-lg-3 col-md-12 col-sm-12">
                        <div class="card bg-light " style="box-shadow: rgba(0, 0, 0, 0.08) 0px 4px 12px;">
                            <div class="card-header text-center"><h5 class="text-secondary">Qolgan budget</h5>
                                <span
                            id="budgetLeft">{% multiple_args_tag project.project_budget project.project_spent_money %}</span></div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-12 col-sm-12">
                        <div class="card bg-light" style="box-shadow: rgba(0, 0, 0, 0.08) 0px 4px 12px;">
                            <div class="card-header text-center"><h5 class="text-secondary">Tugash sanasi</h5>
                                <span>{{ project.project_deadline | format_date }}</span></div>

                        </div>
                    </div>
                <div class="table-container table-responsive">
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">Xarajat nomi</th>
                            <th scope="col">Summasi</th>
                            <th scope="col">Sana</th>
                        </tr>
                        </thead>
                        <tbody id="expenses-body">
                        {% for expense in expenses %}
                            <tr>
                                <td>{{ expense.description }}</td>
                                <td>{{ expense.quantity }}</td>
                                <td>{{ expense.date |  date:"d-m-Y" }}</td>
                                <td><i style="color: red;cursor: pointer" data-toggle="modal"
                                       data-target="#delete-expense-btn" id="{{ expense.id }}"
                                       class="fa-regular delete-expense fa-trash-can"></i></td>
                            </tr>
                            <div id="delete-expense-btn"
                                 class="modal fade"
                                 tabindex="-1" role="dialog"
                                 aria-hidden="true">
                                <div class="modal-dialog modal-sm modal-dialog-centered"
                                     role="document">
                                    <div class="modal-content">
                                        <div class="modal-body text-center">
                                            <i class="fa-solid fa-triangle-exclamation btn-lg"
                                               style="font-size: 5dvh"></i>
                                            <h4>Chindan o'chirasizmi ?</h4></div>
                                        <div class="d-flex justify-content-center mb-2">
                                            <button id="confirm-delete-expense-btn" class="btn btn-danger mr-2"><i
                                                    class="fa-solid fa-trash-can"></i> O'chirish
                                            </button>
                                            <button id="cancel-expense-btn" class="btn btn-secondary" data-dismiss="modal">Bekor qilish</button>
                                            <br>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
</div>


    <script src="{% static 'static/js/expense.js' %}"></script>
{% endblock content %}